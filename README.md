# üåê REST API + FutureBuilder - Flutter Workshop

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–∑—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å REST API –∏ FutureBuilder! –ó–¥–µ—Å—å –º—ã –Ω–∞—É—á–∏–º—Å—è –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

## üìñ –ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ

### 1. –†–∞–±–æ—Ç–∞ —Å REST API
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP –∫–ª–∏–µ–Ω—Ç–∞ (Dio)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ GET –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏
- –¢–∞–π–º–∞—É—Ç—ã –∏ retry –ª–æ–≥–∏–∫–∞

### 2. JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@JsonSerializable`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Å `json_serializable`
- –ú–µ—Ç–æ–¥—ã `fromJson` –∏ `toJson`
- –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å `build_runner`

### 3. FutureBuilder –≤–∏–¥–∂–µ—Ç
- –†–∞–±–æ—Ç–∞ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### 4. UI/UX –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ (Loading states)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (Error handling)
- –ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (Empty states)
- Pull-to-refresh —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ:
```bash
git branch
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∞: * 03-rest-api-futurebuilder
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
flutter pub get
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```bash
dart run build_runner build --delete-conflicting-outputs
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
flutter run
```

## üì± –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤** - FutureBuilder –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É
2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏, –æ—à–∏–±–∫–∏ –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ
3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å—Ç–µ
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∫–Ω–æ–ø–∫–∞ refresh –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

## üìö –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
lib/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ post.dart           # –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ post.g.dart         # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ api_client.dart     # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è API
‚îî‚îÄ‚îÄ main.dart               # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å UI –∏ FutureBuilder
```

## üîç –ò–∑—É—á–µ–Ω–∏–µ –∫–æ–¥–∞

### `lib/models/post.dart`
–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å json_serializable:
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è `@JsonSerializable()`
- –ü–æ–ª—è –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –ú–µ—Ç–æ–¥—ã `fromJson` –∏ `toJson`
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `toString`, `==` –∏ `hashCode`

### `lib/api/api_client.dart`
HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ URL –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
- –ú–µ—Ç–æ–¥ `getPosts()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤
- –ú–µ—Ç–æ–¥ `getPost(id)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

### `lib/main.dart`
–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å FutureBuilder:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FutureBuilder<List<Post>>`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π: loading, error, success, empty
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏

## üåê API Endpoint

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API [JSONPlaceholder](https://jsonplaceholder.typicode.com/):

```
GET https://jsonplaceholder.typicode.com/posts
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤:
```json
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere repellat",
  "body": "quia et suscipit..."
}
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### FutureBuilder –ø–∞—Ç—Ç–µ—Ä–Ω—ã

```dart
FutureBuilder<List<Post>>(
  future: _postsFuture,
  builder: (context, snapshot) {
    if (snapshot.connectionState == ConnectionState.waiting) {
      return LoadingWidget();
    } else if (snapshot.hasError) {
      return ErrorWidget();
    } else if (snapshot.hasData) {
      return DataWidget(snapshot.data!);
    } else {
      return EmptyWidget();
    }
  },
)
```

### JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

```dart
@JsonSerializable()
class Post {
  final int userId;
  final int id;
  final String title;
  final String body;

  factory Post.fromJson(Map<String, dynamic> json) => _$PostFromJson(json);
  Map<String, dynamic> toJson() => _$PostToJson(this);
}
```

### HTTP –∑–∞–ø—Ä–æ—Å—ã —Å Dio

```dart
Future<List<Post>> getPosts() async {
  final response = await _dio.get('/posts');
  final List<dynamic> data = response.data;
  return data.map((json) => Post.fromJson(json)).toList();
}
```

## üéì –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É
2. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é** - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤ —á–∞—Å—Ç—è–º–∏
3. **–î–æ–±–∞–≤–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è –ø–æ—Å—Ç–æ–≤
4. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω–æ

## üõ†Ô∏è Debugging —Å–æ–≤–µ—Ç—ã

- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- **–°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å** - –≤—Å–µ –æ—à–∏–±–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –ª–æ–≥
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ breakpoints** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–µ–ª—å** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ JSON —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥–µ–ª–∏

## ‚û°Ô∏è –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è FutureBuilder –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ state management:

```bash
# Provider
git checkout 04-rest-api-provider

# BLoC
git checkout 05-rest-api-bloc

# Riverpod
git checkout 06-rest-api-riverpod
```

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Dio Documentation](https://pub.dev/packages/dio)
- [json_serializable](https://pub.dev/packages/json_serializable)
- [FutureBuilder –≤ Flutter](https://api.flutter.dev/flutter/widgets/FutureBuilder-class.html)
- [JSONPlaceholder API](https://jsonplaceholder.typicode.com/)

---

**–°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞**: [REST API + Provider](../04-rest-api-provider)  
**–ù–∞–∑–∞–¥**: [–û—Å–Ω–æ–≤—ã Flutter](../02-flutter-basics)
